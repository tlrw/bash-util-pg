#!/usr/bin/env bash

###>embedded

__SRC__="$(dirname "$(dirname "${BASH_SOURCE[0]}")")/src"

source "${__SRC__}/lib/tlrw/bash-lib/src/inc.bash" "debug" "error" || {
    echo "[!] Failed to source lib/tlrw/bash-lib/src/cmd.bash" >&2

    exit 1
}

inc "${__SRC__}/pg/con.bash"

source "${__SRC__}/pg.bash" || {
    echo "[!] Failed to source pg.bash" >&2

    exit 1
}

source "${__SRC__}/pg/con.bash" || {
    echo "[!] Failed to source pg/con.bash" >&2

    exit 1
}

###<embedded


PGDATABASE="${PGDATABASE:-${POSTGRES_DB:-}}" && {
    [[ -n ${PGDATABASE} ]] && export PGDATABASE
}


main() {
    util_require_cmd "psql"

    pg_con "$@"
}

main "$@"
